### **项目名称：心屿 - AI心理伙伴 (Web版)**

### **一、 整体架构与技术选型**

* **前端框架：** Vue 3 + Composition API + Vite (用于快速开发和良好的性能)
* **状态管理：** Pinia (Vue官方推荐，轻量且高效)
* **UI库：** 可选用与Vue 3兼容的UI框架，如 **Naive UI** 或 **Element Plus**，它们提供丰富的组件，能快速搭建美观的界面。
* **路由：** Vue Router
* **HTTP客户端：** Axios (用于与后端API通信)
* **本地存储：** localStorage (用于存储token、用户基础设置等) + IndexedDB (可选，用于存储大量的本地日记记录，增强离线能力)
* **后端通信：** 通过RESTful API与后端服务交互。后端负责AI对话、情绪分析、用户管理等核心逻辑。

---

### **二、 模块与功能细化**

我们将应用拆分为以下四大模块，并为每个功能点提供详细的描述。

#### **模块一：用户系统与仪表盘**

这个模块是用户进入应用后看到的第一个界面，提供概览和快捷入口。

| 功能点          | 功能描述                  | 前端实现要点                                                                                                                                                                                          |
|:------------ |:--------------------- |:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. 登录/注册** | 学生使用学号/邮箱进行注册和登录。     | - 设计简洁的表单页面。<br>- 调用后端认证API。<br>- 登录成功后，将返回的token存入localStorage。                                                                                                                                |
| **2. 主仪表盘**  | 显示用户的核心心理健康数据概览和快捷入口。 | - **“当前情绪”卡片**：显示由最近一次情绪记录推断出的情绪状态（Emoji+文字）。<br>- **“连续记录”勋章**：显示用户连续记录情绪的天数，鼓励用户。<br>- **快捷入口**：大按钮链接到【记录心情】、【与AI对话】、【CBT训练】核心功能。<br>- **每周情绪曲线**：一个简单的折线图（可使用ECharts或Chart.js），可视化展示本周的情绪波动。 |
| **3. 个人中心**  | 用户管理个人资料和设置。          | - 昵称、头像修改。<br>- 隐私设置（如数据分享开关）。<br>- 应用使用指南。                                                                                                                                                     |

#### **模块二：感知与记录 - “心灵日记本”**

这是“感知-评估-干预”闭环的起点，负责收集用户数据。

| 功能点           | 功能描述               | 前端实现要点                                                                                                                                                       |
|:------------- |:------------------ |:------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **1. 文字情绪日记** | 用户通过文字记录心情和事件。     | - 提供一个富文本编辑器（可选用简单的如`<textarea>`或集成如`@toast-ui/editor`），支持基础格式。<br>- **智能提示**：当用户输入时，在输入框下方给出情绪词提示（如：开心、沮丧、焦虑）。<br>- **提交后**，将内容和时间戳发送给后端，后端返回AI分析的情绪标签和关键词。 |
| **2. 表情打卡**   | 最轻量的情绪记录方式。        | - 一个包含5-7个基础情绪Emoji（如😊 😐 😢 😠 🥱）的列表。<br>- 用户点击一个Emoji即可完成打卡，无需输入文字。<br>- 可以设置为浏览器桌面通知，每天固定时间提醒打卡。                                                        |
| **3. 情绪历史回顾** | 以日历或列表形式查看历史记录。    | - **日历视图**：在日历上，用不同颜色的圆点或Emoji标记每天的情绪状态。<br>- **列表视图**：以时间线形式展示所有日记条目，可点击查看详情。                                                                               |
| **4. 图片关联记录** | 用户可以通过上传图片来辅助表达心情。 | - 提供图片上传组件。<br>- 前端对图片进行压缩处理。<br>- 将图片文件上传至后端，后端可进行简单的图像识别（如识别风景、人物、物体）以辅助情绪分析。                                                                              |

#### **模块三：干预与对话 - “AI伙伴”**

这是应用的核心，提供即时支持和引导。

| 功能点            | 功能描述                       | 前端实现要点                                                                                                                |
|:-------------- |:-------------------------- |:--------------------------------------------------------------------------------------------------------------------- |
| **1. AI对话界面**  | 与AI心理伙伴进行实时文本对话。           | - 设计一个类似聊天软件的界面（气泡式对话）。<br>- 用户输入框在下方，支持发送。<br>- **关键UI/UX**：使用“打字机”效果来模拟AI的思考过程，增强真实感。<br>- 对话记录保存在前端（IndexedDB）和后端。 |
| **2. 对话引导器**   | 为用户提供对话起点，避免“不知道说什么”。      | - 在输入框旁或对话列表顶部，提供几个预设问题按钮，如：“我今天感到很焦虑，该怎么办？”、“能和我聊聊天吗？”、“我遇到了一个社交问题...”。                                              |
| **3. 危机识别与提醒** | 当AI识别到用户有极端言论时，前端展示紧急帮助信息。 | - 当前端从后端接收到“危机”标志时，立即在界面顶部或弹窗中显示醒目的提醒。<br>- 内容为：“检测到您可能需要紧急帮助，请立即联系学校心理咨询中心 [电话]，或拨打24小时心理援助热线 [电话]。”                 |
| **4. 对话记录与收藏** | 用户可以回顾有价值的对话。              | - 提供一个侧边栏或独立页面，列出所有历史对话会话。<br>- 用户可以在某条AI回复上进行“收藏”操作，收藏的对话可以在个人中心查看。                                                  |

#### **模块四：学习与成长 - “CBT训练舱”**

将认知行为疗法游戏化、场景化，是本项目的创意核心。

| 功能点            | 功能描述               | 前端实现要点                                                                                                                                                                                                                                                                                                                      |
|:-------------- |:------------------ |:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. 训练情景列表**  | 展示所有可供练习的虚拟情景。     | - 使用卡片式布局展示各个情景。<br>- 每个卡片包含：情景标题（如：“演讲前的恐慌”、“被导师批评后”）、一个代表图、预计完成时间、难度星级。                                                                                                                                                                                                                                                   |
| **2. 情景交互演练**  | 用户在一个模拟对话中完成CBT练习。 | - **界面设计**：左侧/上方为情景描述和AI扮演的“负面想法”或“他人”的发言。右侧/下方为用户的可选回复或输入框。<br>- **流程**：<br>  1.  **识别情绪**：AI描述情景，询问“你现在的感受是什么？”。用户从列表选择。<br>  2.  **捕捉想法**：AI引导“你脑海中闪过了什么念头？”。用户输入或选择（如：“我肯定要搞砸了”）。<br>  3.  **寻找证据**：AI提问“支持这个想法的证据是什么？反对它的证据呢？”。用户分两栏输入。<br>  4.  **认知重构**：AI引导用户生成一个“更平衡、更合理的想法”。用户输入。<br>- 整个过程像在完成一个多步骤的表单或一个文字冒险游戏。 |
| **3. 训练进度与成就** | 激励用户完成训练。          | - 显示已完成的训练情景数量。<br>- 设立成就系统，如“初次探索者”（完成第一个情景）、“积极思考者”（完成5个情景）等，并颁发虚拟勋章。                                                                                                                                                                                                                                                     |

---

### **三、 页面路由规划**

* `/login` - 登录页
* `/register` - 注册页
* `/dashboard` - 主仪表盘
* `/diary` - 情绪日记主页（包含记录和历史回顾）
* `/chat` - AI对话主界面
* `/cbt` - CBT训练舱主页（情景列表）
* `/cbt/scenario/:id` - 具体的情景演练页面
* `/profile` - 个人中心

### **四、 给开发团队的建议**

1. **原型先行：** 先用Figma或类似工具画出所有页面的高保真原型，明确交互细节，避免后期返工。
2. **组件化开发：** 将通用的UI元素（如按钮、卡片、输入框、情绪Emoji选择器）封装成Vue组件，提高开发效率和一致性。
3. **状态管理清晰：** 使用Pinia管理全局状态，如用户信息、当前对话列表、当前训练进度等。
4. **API接口模拟：** 在后端API开发完成前，前端可以使用Mock.js或简单的JSON文件来模拟接口返回数据，保证前端开发进度不受阻塞。
5. **专注于体验：** 既然放弃了“正念资源库”，就要把**AI对话**和**CBT训练舱**的体验做到极致。流畅的对话交互和引人入胜的训练情景是你们产品的核心竞争力。
